│ │ Plan: Modify Network Recording to Only Capture Errors                                                                                                                                                                                                                                                        │ │
│ │                                                                                                                                                                                                                                                                                                              │ │
│ │ Changes Required                                                                                                                                                                                                                                                                                             │ │
│ │                                                                                                                                                                                                                                                                                                              │ │
│ │ 1. Update NetworkRecorder Logic                                                                                                                                                                                                                                                                              │ │
│ │                                                                                                                                                                                                                                                                                                              │ │
│ │ - File: /Users/chris/code-projects/recorder/src/recorder/networkRecorder.ts                                                                                                                                                                                                                                  │ │
│ │ - Modify addCompletedRequest method: Add filtering logic to only add requests that are errors                                                                                                                                                                                                                │ │
│ │ - Define error conditions:                                                                                                                                                                                                                                                                                   │ │
│ │   - Network errors (fetch promise rejection, xhr.status === 0)                                                                                                                                                                                                                                               │ │
│ │   - HTTP error status codes (4xx, 5xx responses)                                                                                                                                                                                                                                                             │ │
│ │   - Existing error field is populated                                                                                                                                                                                                                                                                        │ │
│ │                                                                                                                                                                                                                                                                                                              │ ││ │
│ │                                                                                                                                                                                                                                                                                                              │ │
│ │ 2. Implementation Details                                                                                                                                                                                                                                                                                    │ │
│ │                                                                                                                                                                                                                                                                                                              │ │
│ │ - Filter in addCompletedRequest: Check if request has error conditions before adding to buffer                                                                                                                                                                                                               │ │
│ │ - Error conditions:                                                                                                                                                                                                                                                                                          │ │
│ │   - request.error is defined (network/fetch errors)                                                                                                                                                                                                                                                          │ │
│ │   - request.responseStatus >= 400 (HTTP 4xx/5xx errors)                                                                                                                                                                                                                                                      │ │ │ │ │ │
│ │                                                                                                                                                                                                                                                                                                              │ │
│ │ Benefits                                                                                                                                                                                                                                                                                                     │ │
│ │                                                                                                                                                                                                                                                                                                              │ │
│ │ - Reduces data volume significantly by only capturing failed requests                                                                                                                                                                                                                                        │ │
│ │ - Maintains all existing error context and debugging information                                                                                                                                                                                                                                             │ │